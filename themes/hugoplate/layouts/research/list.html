{{ define "main" }}
{{ partial "page-header" . }}

{{ range $i, $e := .Params.features }}
<section class="section-sm mt-4 section-{{ $i }} dark:bg-darkmode-body" 
         data-default-title="{{ .defaultTitle }}" 
         data-default-content="{{ .defaultContent }}">
  <div class="container">
    <div class="row items-center justify-between">
      <!-- Text Section -->
      <div class="md:col-7 lg:col-6 {{ if not (modBool $i 2) }}
              md:order-2
            {{ end }}">
        <h2 id="dynamic-title-{{ $i }}" class="mb-4 title-underline">
          {{ .defaultTitle }}
        </h2>
        <p id="dynamic-content-{{ $i }}" class="mb-8 text-lg">
          {{ .defaultContent }}
        </p>
      </div>

      <!-- Image Section -->
      <div class="mb:md-0 md:col-5 mb-6 {{ if not (modBool $i 2) }}
              md:order-1
            {{ end }}">
        <div class="image-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
          <!-- Image 1 -->
          <div class="feature-image" data-title="{{ .title1 }}" data-content="{{ .content1 }}" 
              onmouseover="handleMouseOver({{ $i }}, this)" onmouseout="resetContent({{ $i }})">

            <div style="padding: 10px; width: 200px;">
              <div style="display: flex; flex-direction: column;">
                <div style="display: flex; flex-direction: row;">
                  {{ partial "image" (dict "Src" .image1_1 "Size" "32x32" "Class" "rounded-full") }}
                  {{ partial "image" (dict "Src" .image1_2 "Size" "32x32" "Class" "rounded-full") }}
                </div>
                <h6 style="margin-top: 16px;">{{ .title1 }}</h6>
              </div>
            </div>
          </div>
          <!-- Image 2 -->
          <div class="feature-image" data-title="{{ .title2 }}" data-content="{{ .content2 }}" 
              onmouseover="handleMouseOver({{ $i }}, this)" onmouseout="resetContent({{ $i }})">

            <div style="padding: 10px; width: 200px;">
              <div style="display: flex; flex-direction: column;">
                <div style="display: flex; flex-direction: row;">
                  {{ partial "image" (dict "Src" .image2_1 "Size" "32x32" "Class" "rounded-full") }}
                  {{ partial "image" (dict "Src" .image2_2 "Size" "32x32" "Class" "rounded-full") }}
                </div>
                <h6 style="margin-top: 16px;">{{ .title2 }}</h6>
              </div>
            </div>
          </div>
          <!-- Image 3 -->
          <div class="feature-image" data-title="{{ .title3 }}" data-content="{{ .content3 }}" 
              onmouseover="handleMouseOver({{ $i }}, this)" onmouseout="resetContent({{ $i }})">

            <div style="padding: 10px; width: 200px;">
              <div style="display: flex; flex-direction: column;">
                <div style="display: flex; flex-direction: row;">
                  {{ partial "image" (dict "Src" .image3_1 "Size" "32x32" "Class" "rounded-full") }}
                  {{ partial "image" (dict "Src" .image3_2 "Size" "32x32" "Class" "rounded-full") }}
                </div>
                <h6 style="margin-top: 16px;">{{ .title3 }}</h6>
              </div>
            </div>
          </div>
          <!-- Image 4 -->
          <div class="feature-image" data-title="{{ .title4 }}" data-content="{{ .content4 }}" 
              onmouseover="handleMouseOver({{ $i }}, this)" onmouseout="resetContent({{ $i }})">

            <div style="padding: 10px; width: 200px;">
              <div style="display: flex; flex-direction: column;">
                <div style="display: flex; flex-direction: row;">
                  {{ partial "image" (dict "Src" .image4_1 "Size" "32x32" "Class" "rounded-full") }}
                  {{ partial "image" (dict "Src" .image4_2 "Size" "32x32" "Class" "rounded-full") }}
                </div>
                <h6 style="margin-top: 16px;">{{ .title4 }}</h6>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}

<style>
  /* 각 섹션마다 다른 배경색 */
  .section-0 { background-color: #ffffff; }
  .section-1 { background-color: #f3f3f3; }
  .section-2 { background-color: #ffffff; }

  /* 각 섹션별 이미지 hover 효과 - 트렌디한 네온 글로우 & 스케일 효과 적용 */
  .feature-image {
    background: rgba(255, 255, 255, 0.2); /* 반투명 배경 */
    padding: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-top: 4px solid #AAAAAA;
    backdrop-filter: blur(10px); /* 블러 효과 */
    transition: all 0.3s ease-in-out;
  }

  .section-0 .feature-image:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 0 10px rgba(0, 34, 68, 0.6)); /* 부드러운 네온 블루 */
  }

  .section-1 .feature-image:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 0 10px rgba(0, 34, 68, 0.6)); /* 부드러운 네온 블루 */
  }

  .section-2 .feature-image:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 0 10px rgba(0, 34, 68, 0.6)); /* 부드러운 네온 블루 */
  }

  /* 각 섹션별 defaultTitle 밑줄 색상 설정 */
  .title-underline {
    display: inline-block;
    padding-bottom: 4px;
    position: relative;
  }

  .section-0 .title-underline::after {
    content: "";
    display: block;
    width: 100%;
    height: 3px;
    background-color: rgba(0, 192, 232, 1);
    position: absolute;
    bottom: 0;
    left: 0;
  }

  .section-1 .title-underline::after {
    content: "";
    display: block;
    width: 100%;
    height: 3px;
    background-color: rgba(106, 13, 173, 1);
    position: absolute;
    bottom: 0;
    left: 0;
  }

  .section-2 .title-underline::after {
    content: "";
    display: block;
    width: 100%;
    height: 3px;
    background-color: rgba(255, 166, 43, 1);
    position: absolute;
    bottom: 0;
    left: 0;
  }
</style>

<script>
  function handleMouseOver(index, element) {
    document.getElementById(`dynamic-title-${index}`).textContent = element.getAttribute("data-title");
    document.getElementById(`dynamic-content-${index}`).textContent = element.getAttribute("data-content");
  }

  function resetContent(index) {
    const section = document.querySelector(`.section-${index}`);
    const defaultTitle = section.getAttribute("data-default-title");
    const defaultContent = section.getAttribute("data-default-content");

    document.getElementById(`dynamic-title-${index}`).textContent = defaultTitle;
    document.getElementById(`dynamic-content-${index}`).textContent = defaultContent;
  }
</script>



  <section class="section-sm">
    <div class="container">
      <div class="row justify-center">
        <div class="md:col-10 lg:col-7 text-center">
          {{/*  {{ partial "image" (dict "Src" .Params.image "Context" .Page "Alt" .Title "Class" "mx-auto mb-6" "Size" "200x200") }}  */}}

            <!-- categories -->
            {{ if isset site.Taxonomies "categories" }}
            {{ if not (eq (len site.Taxonomies.categories) 0) }}
            <div class="mb-8">
              <h5 class="mb-6">{{ "Research Topics" }}</h5>
              <div class="rounded p-8">
                <ul class="space-y-4">
                  {{ range $name, $items := site.Taxonomies.categories }}
                    <li>
                      <a
                        class="hover:text-primary dark:hover:text-darkmode-primary {{ if (and (eq $.Page.Kind `term`) (eq $.Page.Type `categories`) (eq $.Page.Title .Page.Title)) }}
                          active
                        {{ end }} flex justify-between"
                        href="{{ .Page.RelPermalink }}">
                        {{ .Page.Title }}
                      </a>

                      <div class="bars-container flex items-center justify-between">
                        {{ $items := $items }}
                        {{ $percentage := mul (len $items) 10 }} <!-- 예를 들어, 각 항목당 10%로 계산 -->
                          <div class="bar bg-gray-100 rounded" style="width: 95%; height: 10px; position: relative;">
                          <div class="bar rounded" style="width: {{ $percentage }}%; background-color: #002244; height: 100%; position: absolute; top: 0; left: 0;"></div>
                        </div>
                        <span class="text-sm text-gray-600">{{ len $items }}</span>
                      </div>
                    </li>
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}
          {{ end }}

          {{/*  <!-- Coming Soon 텍스트 추가 -->
        <h1 class="text-4xl font-bold mb-8">Coming Soon</h1>  */}}
        
        </div>
      </div>
    </div>
  </section>
{{ end }}

